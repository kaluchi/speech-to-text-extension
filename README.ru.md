# Голосовой ввод с ElevenLabs - расширение для Chrome

Расширение для Chrome, которое позволяет использовать технологию распознавания речи от ElevenLabs для голосового ввода текста в любое текстовое поле на веб-странице.

## Важно: API ключ

⚠️ Расширение поставляется без API ключа. Для работы необходимо:

1. Зарегистрироваться на [сайте ElevenLabs](https://elevenlabs.io/)
2. Перейти в раздел "Profile Settings"
3. Найти или сгенерировать свой API ключ
4. Внимательно ознакомиться с [политикой конфиденциальности](https://elevenlabs.io/privacy) и [условиями использования](https://elevenlabs.io/terms)
   - ElevenLabs может хранить и анализировать отправленные аудиозаписи
   - Ваши голосовые данные могут использоваться для улучшения сервиса
   - Существуют ограничения на использование в зависимости от типа аккаунта

Мы рекомендуем:
- Использовать уникальный API ключ для этого расширения
- Регулярно обновлять ключ в целях безопасности
- Следить за использованием ключа в личном кабинете ElevenLabs
- При необходимости ограничить использование ключа по IP или установить другие ограничения в настройках ElevenLabs

## Функциональность

- Активация записи голоса двойным нажатием и удержанием клавиши Cmd (Mac) или Ctrl (Windows/Linux)
- Преобразование речи в текст с помощью API ElevenLabs
- Многоязычный интерфейс (русский, английский)
- Настраиваемый язык распознавания (русский, английский и другие)
- Вставка распознанного текста в активное текстовое поле с учетом контекста
- Автоматическое копирование в буфер обмена, если нет активного поля ввода
- Визуальная индикация процесса записи (настраиваемая)
- Автоматическое открытие настроек при отсутствии API ключа
- Поддержка отмены вставки (Cmd+Z / Ctrl+Z)
- Расширенные настройки распознавания:
  - Маркировка звуковых событий (смех, аплодисменты и др.)
  - Временные метки для слов или символов
  - Разметка говорящих в диалогах
  - Указание количества говорящих (до 32)
  - Ключевые слова для улучшения точности распознавания
  - Выбор предпочитаемого микрофона
  - Отладка записанного звука
  - Настройка визуальной индикации записи

## Установка расширения

1. Загрузите все файлы в одну папку на вашем компьютере
2. Откройте Chrome и перейдите на страницу `chrome://extensions/`
3. Включите "Режим разработчика" (переключатель в правом верхнем углу страницы)
4. Нажмите кнопку "Загрузить распакованное расширение"
5. Выберите папку с файлами расширения

## Использование

1. Перейдите на любую веб-страницу и установите курсор в текстовое поле
2. Дважды быстро нажмите и удерживайте Cmd (Mac) или Ctrl (Windows/Linux)
3. Говорите, пока удерживаете клавишу
4. Отпустите клавишу для завершения записи
5. Распознанный текст будет вставлен в активное поле с возможностью отмены (Cmd+Z / Ctrl+Z)

## Настройка расширения

Расширение предоставляет удобный интерфейс для настройки:

1. Нажмите на иконку расширения в панели инструментов Chrome
2. Нажмите кнопку "Открыть настройки"
3. В открывшейся странице настроек первым делом укажите:
   - API ключ ElevenLabs (обязательно)
     - Получите ключ на сайте ElevenLabs (см. раздел "Важно: API ключ")
     - Поле ключа по умолчанию скрыто для безопасности
     - Кнопка "Показать" позволяет увидеть и отредактировать ключ
     - При ошибке валидации поле автоматически показывается
     - Визуальная индикация ошибок с анимацией
   - Язык интерфейса (русский, английский)
   - Язык распознавания речи
   - Включение/отключение маркировки звуковых событий
   - Детализацию временных меток (отключено/по словам/по символам)
   - Разметку говорящих в диалогах
   - Максимальное количество говорящих (1-32)
   - Ключевые слова для улучшения распознавания (до 100 слов)
   - Предпочитаемый микрофон для ускорения запуска записи
   - Отладку записанного звука (воспроизведение записи)
   - Визуальную индикацию процесса записи

## Требования

- Chrome версии 80 или выше
- Доступ к микрофону
- Действующий API ключ ElevenLabs (требуется регистрация)
- Интернет-соединение для отправки аудио в API ElevenLabs
- HTTPS-соединение для работы с буфером обмена
- Согласие с политикой конфиденциальности и условиями использования ElevenLabs

## Безопасность и конфиденциальность

- Расширение не хранит и не передает данные третьим лицам, кроме ElevenLabs
- Аудиозаписи передаются напрямую в API ElevenLabs
- API ключ хранится локально в браузере в зашифрованном виде
- Рекомендуется регулярно проверять использование ключа в личном кабинете ElevenLabs
- При подозрении на компрометацию ключа немедленно замените его в настройках расширения и деактивируйте старый ключ в ElevenLabs

## Особенности работы

Расширение учитывает контекст при вставке текста:

- Если курсор находится после знака препинания (., !, ?), добавляется пробел перед вставкой
- Если курсор находится после символа переноса строки, текст вставляется без дополнительного форматирования
- В остальных случаях перед вставляемым текстом добавляется ". " для разделения мыслей

При отсутствии активного поля ввода:
- Распознанный текст автоматически копируется в буфер обмена
- Отображается уведомление об успешном копировании

Визуальная индикация записи:
- Жёлтый оверлей при инициализации записи
- Зелёный оверлей во время активной записи
- Можно отключить в настройках

Проверка API ключа:
- При попытке начать запись проверяется наличие и корректность API ключа
- Если ключ отсутствует или некорректен, автоматически открывается страница настроек
- Поле ввода ключа автоматически показывается и получает фокус при ошибке
- Запись не начнется, пока не будет указан правильный API ключ

## Файлы расширения

- `manifest.json` - Манифест расширения
- `content.js` - Основной скрипт, который выполняется на веб-страницах
- `popup.html` - HTML-код для всплывающего окна расширения
- `popup.js` - JavaScript-код для всплывающего окна
- `options.html` - HTML-код для страницы настроек
- `options.js` - JavaScript-код для страницы настроек
- `background.js` - Фоновый скрипт для обработки системных событий
- `localization.js` - Модуль для локализации интерфейса
- `_locales/` - Каталог с файлами локализации для разных языков
- `icon16.png`, `icon48.png`, `icon128.png` - Иконки расширения

## Ограничения

- Не работает на системных страницах Chrome (chrome://)
- Требует разрешения на доступ к микрофону
- Ограничения бесплатного аккаунта ElevenLabs могут применяться к распознаванию речи
- Копирование в буфер обмена может быть ограничено на некоторых веб-сайтах из соображений безопасности

## Устранение неполадок

Если у вас возникли проблемы с расширением:

1. Проверьте, включен ли доступ к микрофону для расширения
2. Убедитесь, что API ключ ElevenLabs действителен
3. Проверьте консоль разработчика на наличие ошибок (F12 -> вкладка Console)
4. Попробуйте перезагрузить расширение на странице chrome://extensions/
5. Если текст не копируется в буфер обмена:
   - Убедитесь, что страница загружена по HTTPS
   - Проверьте, разрешено ли копирование на текущем сайте
   - Попробуйте использовать другой браузер или обновите текущий

## Документация API

Расширение использует ElevenLabs Speech-to-Text API. Полная документация доступна по адресу:
https://elevenlabs.io/docs/api-reference/speech-to-text/convert
